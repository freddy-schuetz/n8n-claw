{
  "settings": {
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": false
  },
  "name": "MCP: Weather",
  "connections": {
    "get_weather": {
      "ai_tool": [
        [
          {
            "node": "MCP Server Trigger",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "nodes": [
    {
      "parameters": {
        "path": "wetter"
      },
      "id": "mcp-trigger",
      "name": "MCP Server Trigger",
      "type": "@n8n/n8n-nodes-langchain.mcpTrigger",
      "typeVersion": 2,
      "position": [
        -32,
        0
      ],
      "webhookId": "7a262b09-7064-4288-92bb-52125d43a0a6"
    },
    {
      "parameters": {
        "description": "Aktuelles Weather und 3-Tage-Vorhersage fuer eine city",
        "jsCode": "const city = query.city || 'Essen';\nconst geo = await helpers.httpRequest({method:'GET',url:'https://geocoding-api.open-meteo.com/v1/search?name='+encodeURIComponent(city)+'&count=1&language=de'});\nif(!geo.results||geo.results.length===0) return 'Stadt nicht gefunden: '+city;\nconst lat=geo.results[0].latitude,lon=geo.results[0].longitude,name=geo.results[0].name;\nconst w = await helpers.httpRequest({method:'GET',url:'https://api.open-meteo.com/v1/forecast?latitude='+lat+'&longitude='+lon+'&current_weather=true&daily=temperature_2m_max,temperature_2m_min,precipitation_probability_max,windspeed_10m_max&timezone=Europe/Berlin&forecast_days=3'});\nconst cw=w.current_weather,d=w.daily;\nlet r=name+': '+cw.temperature+'C, Wind '+cw.windspeed+' km/h\\n';\nconst labels=['heute','morgen','uebermorgen'];\nfor(let i=0;i<3;i++) r+=labels[i]+': '+d.temperature_2m_min[i]+'-'+d.temperature_2m_max[i]+'C, '+d.precipitation_probability_max[i]+'% Regen, Wind '+d.windspeed_10m_max[i]+' km/h\\n';\nreturn r;",
        "specifyInputSchema": true,
        "jsonSchemaExample": "{\"city\":\"Essen\"}"
      },
      "id": "tool-weather",
      "name": "get_weather",
      "type": "@n8n/n8n-nodes-langchain.toolCode",
      "typeVersion": 1.3,
      "position": [
        0,
        304
      ]
    }
  ]
}